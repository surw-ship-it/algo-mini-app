<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Algorand Earn</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="//libtl.com/sdk.js" data-zone="10483596" data-sdk="show_10483596"></script>

<style>
*{box-sizing:border-box}
html,body{margin:0; background:#020617; font-family:Inter,system-ui,Arial; color:#fff;}
#app{min-height:100vh;padding:16px 0 80px}
.card{width:92%; max-width:390px; margin:0 auto; background:rgba(255,255,255,.08); backdrop-filter:blur(18px); border:1px solid rgba(255,255,255,.12); border-radius:26px; padding:22px;}
.brand{display:flex; align-items:center; gap:10px; font-weight:700;}
.brand img{width:30px}
.balance-box{margin:20px 0; padding:18px; border-radius:18px; background:rgba(255,255,255,.14); text-align:center;}
.balance-row{display:flex; justify-content:center; align-items:center; gap:8px;}
.balance-amount{font-size:34px;font-weight:800}
.withdraw-btn, .spinner-btn{margin-top:12px; background:linear-gradient(135deg,#22c55e,#16a34a);}
.section{margin-top:18px}
.section h3{margin:0 0 10px;font-size:15px}
button{width:100%; padding:14px; border-radius:14px; border:none; font-size:15px; color:#fff; cursor:pointer; background:linear-gradient(135deg,#3b82f6,#2563eb);}
button:disabled{opacity:.5;cursor:not-allowed}
.counter{margin-top:8px; font-size:13px; color:#facc15; text-align:center;}
.links{display:grid;gap:10px}
.link-wrap{background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:8px;}
.link-wrap button{padding:10px; font-size:14px; border-radius:12px; background:rgba(255,255,255,.08);}
.timer{margin-top:6px; font-size:12px; color:#facc15; text-align:center;}
.popup, #spinnerPopup, .winPopup{position:fixed; inset:0; display:none; justify-content:center; align-items:center; background:rgba(0,0,0,.65); z-index:9999;}
.popup-card, .spinner-card, .winCard{background:#0f172a; border-radius:20px; padding:22px; width:85%; max-width:320px; text-align:center;}
.popup-card input{width:100%; padding:10px; margin:8px 0; border-radius:10px; border:1px solid rgba(255,255,255,.2); background:#020617; color:#fff;}
.popup-warn{font-size:12px;color:#facc15;margin-top:6px}
.reward-logo{width:56px;height:56px; background:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 12px;}
.reward-logo img{width:32px}
#wheelWrap{position:relative; width:260px; height:260px; margin:10px auto;}
#wheel{width:100%; height:100%; border-radius:50%; transition:transform 5s cubic-bezier(.17,.67,.3,1);}
#pointer{position:absolute; top:0; left:50%; transform:translateX(-50%) rotate(180deg); width:0;height:0; border-left:10px solid transparent; border-right:10px solid transparent; border-bottom:18px solid #facc15;}
.winPopup .winCard{animation:fadeOut 3s forwards;}
@keyframes fadeOut{0%{opacity:1}70%{opacity:1}100%{opacity:0}}
</style>
</head>

<body>
<div id="app">
<div class="card">

<div class="brand">
  <img src="https://cryptologos.cc/logos/algorand-algo-logo.png">
  Algorand Earn
</div>

<div class="balance-box">
  <div>Toplam Bakiye</div>
  <div class="balance-row">
    <div class="balance-amount" id="balance">0.000</div>
    <img src="https://cryptologos.cc/logos/algorand-algo-logo.png" width="22">
  </div>
  <button class="withdraw-btn" id="openWithdraw">ðŸ’¸ Ã‡ekim Yap</button>
  <button class="withdraw-btn spinner-btn" id="openSpinner">ðŸŽ¡ ÅžansÄ±nÄ± Denemek Ä°Ã§in Ã‡evir</button>
</div>

<div class="section">
  <h3>ðŸŽ¬ Reklam Ä°zleyerek Kazan</h3>
  <button id="watchAd">Reklam Ä°zle (+0.1 ALGO)</button>
  <div class="counter" id="adCounter"></div>
</div>

<div class="section">
  <h3>ðŸ”— Ã–dÃ¼llÃ¼ Linkler</h3>
  <div class="links" id="links"></div>
</div>

</div>
</div>

<div class="popup" id="withdrawPopup">
<div class="popup-card">
  <div class="reward-logo">
    <img src="https://cryptologos.cc/logos/algorand-algo-logo.png">
  </div>
  <h3>Ã‡ekim Talebi</h3>
  <p>Mevcut bakiye: <b id="popupBalance">0.000 ALGO</b></p>
  <input id="wallet" placeholder="Algorand cÃ¼zdan adresi">
  <input id="amount" type="number" step="0.001" placeholder="Ã‡ekilecek miktar">
  <div class="popup-warn">Minimum Ã§ekim: 12 ALGO</div>
  <button onclick="sendWithdraw()">GÃ¶nder</button>
  <button onclick="closeWithdraw()" style="margin-top:8px;background:#334155">Ä°ptal</button>
</div>
</div>

<div id="spinnerPopup">
<div class="spinner-card">
  <h3>ðŸŽ¡ 0.25 ALGO karÅŸÄ±lÄ±ÄŸÄ±nda ÅŸansÄ±nÄ± dene!</h3>
  <div id="wheelWrap">
    <div id="pointer"></div>
    <canvas id="wheel" width="260" height="260"></canvas>
  </div>
  <button onclick="spin()">Ã‡evir</button>
  <button onclick="closeSpinner()" style="margin-top:8px;background:#334155">Kapat</button>
</div>
</div>

<div class="winPopup" id="winPopup">
  <div class="winCard" id="winText"></div>
</div>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

let balance=Number(localStorage.getItem("balance"))||0;
let dailyAds=Number(localStorage.getItem("dailyAds"))||30;
let lastDay=localStorage.getItem("lastAdDay")||new Date().toDateString();
const balanceEl=document.getElementById("balance");
balanceEl.innerText=balance.toFixed(3);

/* ===== ADS ===== */
function resetAds(){
  const t=new Date().toDateString();
  if(t!==lastDay){
    dailyAds=30;
    lastDay=t;
    localStorage.setItem("dailyAds",30);
    localStorage.setItem("lastAdDay",t);
  }
}
resetAds();
adCounter.innerText=`GÃ¼nlÃ¼k reklam hakkÄ±nÄ±z: ${dailyAds} / 30`;

watchAd.onclick=async()=>{
  if(dailyAds<=0){alert("GÃ¼nlÃ¼k limit doldu");return;}
  await show_10483596();
  dailyAds--;
  balance+=0.1;
  localStorage.setItem("balance",balance);
  localStorage.setItem("dailyAds",dailyAds);
  balanceEl.innerText=balance.toFixed(3);
  adCounter.innerText=`GÃ¼nlÃ¼k reklam hakkÄ±nÄ±z: ${dailyAds} / 30`;
};

/* ===== WITHDRAW ===== */
openWithdraw.onclick=()=>{
  popupBalance.innerText=balance.toFixed(3)+" ALGO";
  withdrawPopup.style.display="flex";
};
function closeWithdraw(){withdrawPopup.style.display="none";}
function isAlgorandAddress(a){return /^[A-Z2-7]{58}$/.test(a);}
function sendWithdraw(){
  const w=wallet.value.trim();
  const a=parseFloat(amount.value);
  if(!isAlgorandAddress(w)){alert("YalnÄ±zca Algorand adresi giriniz");return;}
  if(isNaN(a)||a<12){alert("Minimum Ã§ekim 12 ALGO");return;}
  if(a>balance){alert("Yetersiz bakiye");return;}
  balance-=a;
  localStorage.setItem("balance",balance);
  balanceEl.innerText=balance.toFixed(3);
  closeWithdraw();
  alert("Ã‡ekim talebi alÄ±ndÄ± (demo)");
}

/* ===== LINKS ===== */
const links=[
"https://otieu.com/4/10484834",
"https://otieu.com/4/10498410",
"https://otieu.com/4/10498413",
"https://otieu.com/4/10498415",
"https://otieu.com/4/10498414",
"https://otieu.com/4/10513346",
"https://otieu.com/4/10513352",
"https://otieu.com/4/10513355",
"https://otieu.com/4/10513358",
"https://otieu.com/4/10513360"
];
const linksDiv=document.getElementById("links");
const COOLDOWN=43200000;
function format(ms){
  const t=Math.max(0,ms);
  const h=Math.floor(t/3600000);
  const m=Math.floor((t%3600000)/60000);
  return `${h}sa ${m}dk`;
}
function renderLinks(){
  linksDiv.innerHTML="";
  links.forEach((url,i)=>{
    const wrap=document.createElement("div");
    wrap.className="link-wrap";
    const btn=document.createElement("button");
    const timer=document.createElement("div");
    timer.className="timer";
    const last=Number(localStorage.getItem("link_"+i));
    const left=last?COOLDOWN-(Date.now()-last):0;
    btn.innerText=`ðŸ”— Link ${i+1} (+0.025 ALGO)`;
    if(left>0){
      btn.disabled=true;
      timer.innerText="Kalan sÃ¼re: "+format(left);
    }else{
      btn.onclick=()=>{
        localStorage.setItem("link_"+i,Date.now());
        localStorage.setItem("pendingReward",i);
        location.href=url;
      };
    }
    wrap.appendChild(btn);
    if(left>0) wrap.appendChild(timer);
    linksDiv.appendChild(wrap);
  });
}
setInterval(renderLinks,60000);
renderLinks();

/* LINK DÃ–NÃœÅž Ã–DÃœLÃœ */
const pending=localStorage.getItem("pendingReward");
if(pending){
  balance+=0.025;
  localStorage.setItem("balance",balance);
  balanceEl.innerText=balance.toFixed(3);
  localStorage.removeItem("pendingReward");
}

/* ===== SPINNER ===== */
const spinCost=0.25;
let spinning=false;
const prizes=[
 {label:"Yeniden Dene",amount:0,confetti:true,color:"#334155"},
 {label:"0.05 ALGO",amount:0.05,confetti:true,color:"#2563eb"},
 {label:"0.1 ALGO",amount:0.1,confetti:true,color:"#3b82f6"},
 {label:"0.25 ALGO",amount:0.25,confetti:true,color:"#22c55e"},
 {label:"1 ALGO",amount:1,confetti:true,color:"#16a34a"},
 {label:"10 ALGO",amount:10,confetti:true,color:"#facc15"}
];
const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");
const center=130;
const slice=2*Math.PI/prizes.length;
function drawWheel(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  prizes.forEach((p,i)=>{
    ctx.beginPath();
    ctx.moveTo(center,center);
    ctx.fillStyle=p.color;
    ctx.arc(center,center,center,i*slice,(i+1)*slice);
    ctx.fill();
    ctx.save();
    ctx.translate(center,center);
    ctx.rotate(i*slice+slice/2);
    ctx.textAlign="right";
    ctx.fillStyle="#fff";
    ctx.font="bold 14px Arial";
    ctx.fillText(p.label,110,5);
    ctx.restore();
  });
}
drawWheel();
function weightedPrize(){
  const total=prizes.reduce((s,p)=>s+p.weight||1,0);
  const r=Math.random()*total;
  let sum=0;
  for(let i=0;i<prizes.length;i++){
    sum+=prizes[i].weight||1;
    if(r<=sum) return i;
  }
  return prizes.length-1;
}
function openSpinner(){spinnerPopup.style.display="flex"; drawWheel();}
function closeSpinner(){spinnerPopup.style.display="none";}
function spin(){
  if(spinning) return;
  if(balance<spinCost){alert("Bakiye yetersiz"); return;}
  spinning=true;
  balance-=spinCost;
  localStorage.setItem("balance",balance);
  balanceEl.innerText=balance.toFixed(3);
  const index=Math.floor(Math.random()*prizes.length); // basit rastgele
  const deg=360*5 + (360/index)/prizes.length*index;
  canvas.style.transform=`rotate(${deg}deg)`;
  setTimeout(()=>{
    const p=prizes[index];
    if(p.amount>0){
      balance+=p.amount;
      localStorage.setItem("balance",balance);
      balanceEl.innerText=balance.toFixed(3);
    }
    winText.innerHTML=`ðŸŽ‰ Tebrikler <b>${p.label}</b> kazandÄ±nÄ±z!`;
    winPopup.style.display="flex";
    setTimeout(()=>winPopup.style.display="none",3000);
    spinning=false;
  },4500);
}
document.addEventListener("DOMContentLoaded",()=>{
  withdrawPopup.style.display="none";
  spinnerPopup.style.display="none";
  winPopup.style.display="none";
});
openSpinner.onclick=openSpinner;
</script>

</body>
</html>
