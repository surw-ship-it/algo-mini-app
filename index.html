<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Algorand Ads</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="//libtl.com/sdk.js"
data-zone="10483596"
data-sdk="show_10483596"></script>

<style>
:root{
  --bg:#020617;
  --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.08);
  --primary:#ffffff;
  --secondary:#3b82f6;
  --success:#22c55e;
  --danger:#ef4444;
  --warning:#facc15;
  --muted:#94a3b8;
}

*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  background:radial-gradient(circle at top,#0f172a,#020617);
  font-family:Inter,system-ui,Arial;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* CARD */
.card{
  width:92%;
  max-width:380px;
  background:var(--card);
  backdrop-filter:blur(18px);
  border:1px solid var(--border);
  border-radius:24px;
  padding:22px;
  box-shadow:0 30px 60px rgba(0,0,0,.5);
  position:relative;
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  font-weight:700;
  letter-spacing:.4px;
  font-size:16px;
}

.brand svg{
  width:30px;
  height:30px;
  fill:#fff;
}

.withdraw-btn{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  border:none;
  padding:7px 14px;
  border-radius:999px;
  color:#fff;
  font-size:13px;
  cursor:pointer;
  box-shadow:0 6px 18px rgba(34,197,94,.35);
  transition:.2s;
}
.withdraw-btn:hover{transform:scale(1.05)}

/* BALANCE */
.balance-box{
  margin:22px 0;
  padding:20px;
  border-radius:20px;
  background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(59,130,246,.18));
  border:1px solid var(--border);
  text-align:center;
}

.balance-box span{
  display:block;
  font-size:13px;
  color:var(--muted);
}

.balance{
  font-size:34px;
  font-weight:700;
  margin-top:6px;
}

/* INFO */
.info{
  text-align:center;
  font-size:14px;
  color:var(--muted);
}

/* COUNTER */
.counter{
  margin-top:14px;
  padding:12px;
  border-radius:16px;
  background:rgba(250,204,21,.12);
  border:1px solid rgba(250,204,21,.3);
  text-align:center;
  font-size:14px;
}

/* MAIN BUTTON */
.main-btn{
  width:100%;
  margin-top:18px;
  padding:16px;
  border-radius:18px;
  border:none;
  font-size:16px;
  font-weight:600;
  background:linear-gradient(135deg,#ffffff,#e5e7eb);
  color:#020617;
  cursor:pointer;
  box-shadow:0 12px 30px rgba(255,255,255,.25);
  transition:.2s;
}
.main-btn:hover{transform:translateY(-2px)}
.main-btn:disabled{
  background:#334155;
  color:var(--muted);
  box-shadow:none;
}

/* TOAST */
#toast{
  display:none;
  position:absolute;
  bottom:-18px;
  left:50%;
  transform:translateX(-50%);
  background:linear-gradient(135deg,#22c55e,#16a34a);
  padding:10px 18px;
  border-radius:999px;
  font-size:14px;
  box-shadow:0 10px 24px rgba(0,0,0,.45);
}

/* POPUP */
#withdrawPopup{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  justify-content:center;
  align-items:center;
}

.popup{
  width:90%;
  max-width:330px;
  background:var(--card);
  backdrop-filter:blur(20px);
  border-radius:22px;
  border:1px solid var(--border);
  padding:22px;
  text-align:center;
}

.popup h3{margin:0 0 10px}

.popup .muted{
  font-size:13px;
  color:var(--muted);
  margin-bottom:4px;
}

.popup input{
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:14px;
  background:rgba(255,255,255,.08);
  border:1px solid var(--border);
  color:#fff;
}

.popup button{
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:14px;
  border:none;
  cursor:pointer;
}

.send{
  background:linear-gradient(135deg,#ffffff,#e5e7eb);
  color:#020617;
  font-weight:600;
}

.cancel{
  background:transparent;
  border:1px solid var(--border);
  color:var(--muted);
}
</style>
</head>

<body>

<div class="card">

  <div class="header">
    <div class="brand">
      <!-- OFFICIAL ALGORAND LOGO (SVG) -->
      <svg viewBox="0 0 512 512">
        <path d="M256 0C114.62 0 0 114.62 0 256s114.62 256 256 256 256-114.62 256-256S397.38 0 256 0zm68.63 382.59h-42.94l-24.7-56.45h-52.97l-24.7 56.45h-41.66l96.63-203.19h38.08l96.26 203.19zm-92.94-89.64h27.14l-13.57-31.68z"/>
      </svg>
      Algorand Ads
    </div>

    <button class="withdraw-btn" id="withdrawBtn">üí∏ √áekim</button>
  </div>

  <div class="balance-box">
    <span>Toplam Bakiye</span>
    <div class="balance"><span id="balance">0.0</span> ALGO</div>
  </div>

  <div class="info">üé¨ Her reklam izleyi≈üte <b>0.1 ALGO</b> kazan</div>

  <div id="counterBox" class="counter">
    ‚è≥ G√ºnl√ºk kalan reklam: <b><span id="counter">30</span></b>
  </div>

  <button id="watchAd" class="main-btn">‚ñ∂ Reklam ƒ∞zle</button>

  <div id="toast">üéâ 0.1 ALGO bakiyene eklendi</div>
</div>

<!-- WITHDRAW POPUP -->
<div id="withdrawPopup">
  <div class="popup">
    <h3>üí∏ √áekim Talebi</h3>
    <div class="muted">Mevcut Bakiye: <b><span id="popupBalance">0.0</span> ALGO</b></div>
    <div class="muted">‚ö† Minimum √ßekim: 12 ALGO</div>

    <input id="walletInput" placeholder="Algorand adresi">
    <input id="amountInput" type="number" step="0.1" placeholder="√áekilecek miktar">

    <button class="send" id="sendWithdraw">G√∂nder</button>
    <button class="cancel" id="closeWithdraw">ƒ∞ptal</button>
  </div>
</div>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

let balance = 0;
let dailyAdsLeft = 30;
const REWARD = 0.1;
const MIN_WITHDRAW = 12;

const balanceEl = document.getElementById("balance");
const popupBalance = document.getElementById("popupBalance");
const counterEl = document.getElementById("counter");
const counterBox = document.getElementById("counterBox");
const adBtn = document.getElementById("watchAd");
const toast = document.getElementById("toast");

const withdrawBtn = document.getElementById("withdrawBtn");
const popup = document.getElementById("withdrawPopup");
const closeBtn = document.getElementById("closeWithdraw");
const sendBtn = document.getElementById("sendWithdraw");

function showToast(){
  toast.style.display="block";
  setTimeout(()=>toast.style.display="none",2200);
}

function isValidAlgoAddress(addr){
  return /^[A-Z2-7]{58}$/.test(addr);
}

adBtn.onclick = async()=>{
  if(dailyAdsLeft<=0) return;
  if(typeof show_10483596!=="function") return alert("Reklam y√ºklenemedi");

  await show_10483596();

  dailyAdsLeft--;
  balance+=REWARD;

  balanceEl.innerText=balance.toFixed(1);
  counterEl.innerText=dailyAdsLeft;
  showToast();

  if(dailyAdsLeft<=0){
    counterBox.innerText="üö´ G√ºnl√ºk limit doldu";
    adBtn.disabled=true;
  }
};

withdrawBtn.onclick=()=>{
  popupBalance.innerText=balance.toFixed(1);
  popup.style.display="flex";
};

closeBtn.onclick=()=>popup.style.display="none";

sendBtn.onclick=()=>{
  const wallet=walletInput.value.trim();
  const amount=parseFloat(amountInput.value);

  if(!isValidAlgoAddress(wallet))
    return alert("Girdiƒüiniz adres yanlƒ±≈ü. L√ºtfen yalnƒ±zca Algorand adresi giriniz.");

  if(!amount||amount<MIN_WITHDRAW)
    return alert("Minimum √ßekim 12 ALGO");

  if(amount>balance)
    return alert("Bakiyeniz yetersiz");

  balance-=amount;
  balanceEl.innerText=balance.toFixed(1);
  popup.style.display="none";
  alert("√áekim talebi alƒ±ndƒ± (demo)");
};
</script>

</body>
</html>
